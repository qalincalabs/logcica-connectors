import * as openBatraTransformer from "./openBatraTransformer.js";
import * as openFoodNetworkTransformer from "./openFoodNetworkTransformer";

test("OpenBatra template", async () => {
  //openBatraProduct["s:manufacturer"] = manufacturer;

  const product = openBatraProduct;
  const context = openBatraTransformer.extractFromProduct(product);

  console.log(JSON.stringify(context, null, 2));

  
  const logCiCaProduct = context.products[0];
  logCiCaProduct.ids.push("ofn_be/product/11408");

  const ofnProduct = openFoodNetworkTransformer.mapProduct(logCiCaProduct);

  console.log(JSON.stringify(ofnProduct, null, 2));

});


const openBatraProduct = {"@context":{"gs1":"http:\/\/gs1.org\/voc\/","s":"https:\/\/schema.org\/","xsd":"http:\/\/www.w3.org\/2001\/XMLSchema#","@vocab":"http:\/\/gs1.org\/voc\/"},"@type":["gs1:Beverage","s:Product"],"s:name":[{"@value":"Bi\u00e8re pour la foire agricole","@language":"fr"}],"s:brand":{"@id":"Qalinca Labs"},"s:description":[{"@value":"Une tr\u00e8s bonne bi\u00e8re","@language":"fr"}],"productMarketingMessage":[{"@value":"Rafra\u00eechissant","@language":"fr"}],"s:image":{"s:url":{"@id":"https:\/\/cdn.pixabay.com\/photo\/2015\/06\/24\/13\/31\/beer-820011_960_720.jpg"},"@type":["gs1:ReferencedFileDetails","s:MediaObject"]},"functionalName":[{"@value":"Biere de table","@language":"fr"},{"@value":"Bier, tafelbier","@language":"nl"},{"@value":"Bier, Tafelbier","@language":"de"},{"@value":"Beer of table","@language":"en"}],"gpcCategoryCode":"10000159","s:manufacturer":{"taxID":"","vatID":"","globalLocationNumber":"1454000020008","name":[{"@language":"fr","@value":"Qalica Lab"}],"address":[],"contactPoint":[],"@id":"1454000020008"},"manufacturingPlant":{"@id":"Carlsbourg"},"netContent":{"s:value":{"@value":"330","@type":"xsd:float"},"s:unitCode":"MLT","@type":["gs1:QuantitativeValue","s:QuantitativeValue"]},"consumerStorageInstructions":[{"@value":"Conserver \u00e0 la cave","@language":"fr"}],"consumerUsageInstructions":[{"@value":"\u00c0 consommer avec mod\u00e9ration","@language":"fr"}],"percentageOfAlcoholByVolume":{"@value":"6","@type":"xsd:float"},"ingredientStatement":[{"@value":"eau (95%), orge (4%), levure","@language":"fr"}],"countryOfOriginStatement":[{"@value":"Carlsbourg, Belgique","@language":"fr"}],"countryOfOrigin":[{"@type":["gs1:Country","s:Country"],"countryCode":"BE"}],"nutrientBasisQuantity":{"s:value":"100","s:unitCode":"GRM","@type":["gs1:QuantitativeValue","s:QuantitativeValue"]},"fatPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"saturatedFatPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"monounsaturatedFatPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"polyunsaturatedFatPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"carbohydratesPerNutrientBasis":{"s:value":{"@value":"2.3","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"sugarsPerNutrientBasis":{"s:value":{"@value":"2.3","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"starchPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"saltPerNutrientBasis":{"s:value":{"@value":"0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"fibrePerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"proteinPerNutrientBasis":{"s:value":{"@value":"0.4","@type":"xsd:float"},"s:unitCode":"GRM","@type":"gs1:NutritionMeasurementType"},"vitaminAPerNutrientBasis":{"s:value":{"@value":"0","@type":"xsd:float"},"s:unitCode":"MC","@type":"gs1:NutritionMeasurementType"},"vitaminDPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"MC","@type":"gs1:NutritionMeasurementType"},"vitaminCPerNutrientBasis":{"s:value":{"@value":"0","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"thiaminPerNutrientBasis":{"s:value":{"@value":"0.01","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"riboflavinPerNutrientBasis":{"s:value":{"@value":"0.02","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"vitaminB12PerNutrientBasis":{"s:value":{"@value":"0.00","@type":"xsd:float"},"s:unitCode":"MC","@type":"gs1:NutritionMeasurementType"},"potassiumPerNutrientBasis":{"s:value":{"@value":"23","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"calciumPerNutrientBasis":{"s:value":{"@value":"1","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"phosphorusPerNutrientBasis":{"s:value":{"@value":"18","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"magnesiumPerNutrientBasis":{"s:value":{"@value":"5","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"ironPerNutrientBasis":{"s:value":{"@value":"0.1","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"zincPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"copperPerNutrientBasis":{"s:value":{"@value":"0.0","@type":"xsd:float"},"s:unitCode":"MGM","@type":"gs1:NutritionMeasurementType"},"seleniumPerNutrientBasis":{"s:value":{"@value":"1","@type":"xsd:float"},"s:unitCode":"MC","@type":"gs1:NutritionMeasurementType"},"energyPerNutrientBasis":[{"s:value":{"@value":"32","@type":"xsd:float"},"s:unitCode":"KJO","@type":"gs1:NutritionMeasurementType"},{"s:value":{"@value":"133","@type":"xsd:float"},"s:unitCode":"E14","@type":"gs1:NutritionMeasurementType"}],"ingredient":[{"@type":"gs1:FoodBeverageTobaccoIngredientDetails","ingredientSequence":{"@type":"xsd:integer","@value":1},"ingredientName":[{"@value":"eau (95%)","@language":"fr"}]},{"@type":"gs1:FoodBeverageTobaccoIngredientDetails","ingredientSequence":{"@type":"xsd:integer","@value":2},"ingredientName":[{"@value":"orge (4%)","@language":"fr"}]},{"@type":"gs1:FoodBeverageTobaccoIngredientDetails","ingredientSequence":{"@type":"xsd:integer","@value":3},"ingredientName":[{"@value":"levure","@language":"fr"}]}],"additionalProductClassification":[{"additionalProductClassificationCode":"google_product_category","@type":"gs1:AdditionalProductClassificationDetails"}],"hasAllergen":[{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-FISH"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-FREE_FROM"},"allergenType":{"@id":"gs1:AllergenTypeCode-EGGS"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-MAY_CONTAIN"},"allergenType":{"@id":"gs1:AllergenTypeCode-CELERY"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-MILK"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-LUPINE"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-MUSTARD"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-CRUSTACEANS"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-MOLLUSCS"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-PEANUTS"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-SOYBEANS"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-CEREALS_CONTAINING_GLUTEN"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-SULPHUR_DIOXIDE"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-SESAME_SEEDS"},"@type":"gs1:AllergenDetails"},{"allergenLevelOfContainmentCode":{"@id":"gs1:LevelOfContainmentCode-CONTAINS"},"allergenType":{"@id":"gs1:AllergenTypeCode-TREE_NUTS"},"@type":"gs1:AllergenDetails"}],"gtin":"01454000020015"}